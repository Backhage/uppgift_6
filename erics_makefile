PROGRAM_NAME = electrotest
LIBS = component.so power.so resistance.so

all : lib program

program : main.c $(LIBS)
	gcc -L. -Wl,-rpath=. -Wall -o $(PROGRAM_NAME) main.c -lcomponent -lpower -lresistance

lib : $(LIBS)

component.so : component.o
	gcc -shared -o libcomponent.so component.o

component.o : component.c component.h
	gcc -c -Wall -Werror -fpic component.c

power.so : power.o
	gcc -shared -o libpower.so power.o

power.o : power.c power.h
	gcc -c -Wall -Werror -fpic power.c

resistance.so : resistance.o
	gcc -shared -o libresistance.so resistance.o

resistance.o : resistance.c resistance.h
	gcc -c -Wall -Werror -fpic resistance.c

clean : 
	rm -f $(PROGRAM_NAME) *.o *.so
